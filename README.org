#+TITLE: Kopie bezpieczeństwa
#+SUBTITLE: Projektowanie systemów bezpieczeństwa
#+AUTHOR: Patryk Gronkiewicz 164157, Piotr Krawiec 164165
#+EMAIL: 164157@stud.prz.edu.pl, 164165@stud.prz.edu.pl
#+OPTIONS: toc:nil
#+LANGUAGE: pl

* Wybrane programy
** Rsync + tar
** Duplicati
** Restic
* Sposób działania
** Rsync + tar
** Duplicati

Duplicati działa podobnie jak większość podobnych mu systemów backupów. W tle uruchomiony jest serwis sprawdzający czy warunki uruchomienia danej konfiguracji zostały spełnione. Jeżeli tak, uruchamiana jest odpowiednia konfiguracja. Po zakończeniu działania danej konfiguracji otrzymujemy powiadomienie w przypadku jej niepowodzenia. Informacja o tym kiedy wykonana została odstatnia kopia zapasowa dostępna jest z poziomu interfejsu przeglądarkowego.   

Format w jakim duplicati tworzy backupy opiera się o bloki. Oznacza to, że Duplicati nie kopiuje bezpośrednio plików w wybrane miejsce, a dzieli je na mniejsze bloki. Natomiast małe pliki łączone są w większe bloki. Nazwy stworzonych bloków są tworzone tak, aby nie niosły za sobą informacji o dacie stworzenia czy zawartości, dzięki czemu można je przechowywac bezpiecznie w chmurze. Informacja o tym jakie pliki znajdują się w danym bloku znajduje się w bazie danych, która zostaje stworzona dla każdej z kopii zapasowych (zarówno lokalnie jak i zdalnie).

Aby zapewnić dodatkowe bezpieczeństwo domyślnie Duplicati sugeruje, aby wszystkie dane szyfrować. Aplikacja sama generuje hasło i je zapisuje, a my tak wygenerowaną konfigurację (z zapisanymi hasłami) zapisać w bezpiecznym miejscu (Secure Notes itp.).

#+CAPTION: Schemat blokowy procesu tworzenia kopii przez Duplicati
[[./img/duplicati/duplicati-processing-files-and-folders.png]]

** Restic
* Retencja
** Rsync + tar
** Duplicati

Duplicati oferuje zarówno gotowe tryby retencji, jak i pozwala na ręczne ustawienie retencji.

- =Keep all backups= - żadne dane nie zostają usunięte (utrzymywane są wszystkie wersje plików). Kopia zapasowa będzie rosła z każdą zmianą.
- =Delete backups that are older than= - usuwa wszystkie kopie plików starsze niż podana ilość czasu, o ile znaleziona zostanie co najmniej jedna nowsza wersja kopii.
- =Keep a specific number of backups= - najstarsze kopie plików ponad podaną ilość są usuwane.
- =Smart backup retention= - tryb smart, kopie zostają usuwane automatycznie jeżeli będzie ich więcej niż:
    - Po jednej kopii na każdy z ostatnich 7 dni
    - Po jednej kopii na każdy z ostatnich 4 togodnii
    - Po jednej kopii na każdy z ostatnich 12 miesięcy
    - Zawsze istnieć będzie co najmniej jedna kopia
- =Custom backup retention= - pozwala na ustawienie dowolnej kombinacji w formacie: =NUMER= =CZAS=:=NUMER= =CZAS=. Np. 1W:1D, pozostawia na następne 7 dni jedną kopię z każdego dnia.


** Restic
* Typy kopii
** Rsync + tar
** Duplicati
** Restic
* Chmura
** Rsync + tar
** Duplicati
** Restic
* .img/duplicati/1.png
